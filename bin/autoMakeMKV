#!/usr/bin/env python3
import argparse

from multiprocessing import set_start_method

from automakemkv import LOG, STREAM
from automakemkv.ripper import watchdog 

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument( 'outdir',     type=str, help='Directory to save ripped titles to')
    parser.add_argument( '--loglevel', type=int, default=30, help='Set logging level')
    parser.add_argument( '--all',    action='store_true', help="If set, all tiltes (main and extra) will be ripped" )
    parser.add_argument( '--extras', action='store_true', help="If set, only 'extra' titles will be ripped" )


    args = parser.parse_args()
    set_start_method('spawn')

    STREAM.setLevel( args.loglevel )
    LOG.addHandler(STREAM)
    watchdog( args.outdir, everything=args.all, extras=args.extras )
